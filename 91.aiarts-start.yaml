- hosts: localhost
  any_errors_fatal: yes
  vars_prompt:
    name: "confirmation"
    prompt: 'Do you want to start {{ sn if sn is defined else "all aiarts"}} service?(yes/no)'
    default: "no"
    private: no
  tasks:
    - name: First Check Confirmation
      fail: msg="Playbook start {{ sn if sn is defined else "all aiarts"}} service action canceled"
      when: not(confirmation | bool)

- hosts:
  - kube-master
  - kube-worker
  roles:
    - { role: aiarts-service, step: "render", when: "hostvars[inventory_hostname]['RENDER_SERVICE'] is defined", service_name: '{{sn if sn is defined else ""}}'}
    - { role: aiarts-service, step: "start-service", when: "hostvars[inventory_hostname]['RENDER_SERVICE'] is defined", service_name: '{{sn if sn is defined else ""}}'}
