apiVersion: v1
kind: PersistentVolume
metadata:
  name: aiplatform-component-data-pv
spec:
  capacity:
    storage: 300Mi
  accessModes:
    - ReadWriteMany
  storageClassName: {{ rook_pv_pvc_mounts["component-data"]["storageClassName"] }}
  cephfs:
    monitors:
    {% for hostname in groups['ceph-server'] %}
      {% if hostvars[hostname]['mon'] is defined and hostvars[hostname]['mon'] == 'yes' %}
    - {{ hostname }}:6789
      {% endif %}
    {% endfor %}
    path: {{ rook_pv_pvc_mounts["component-data"]["rootPath"] }}
    user: admin
    secretRef:
      name: ceph-secret
    readOnly: false
  persistentVolumeReclaimPolicy: Retain

---
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: aiplatform-component-data-pvc
  namespace: kube-system
spec:
  storageClassName: {{ rook_pv_pvc_mounts["component-data"]["storageClassName"] }}
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 200Mi
